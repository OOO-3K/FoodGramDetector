# FoodGramDetector
Object detection module for ingredients recognition

Па-русски: модуль распознавания ингредиентов

## Использование
1. Выполнить  
   ```ps
   pip install -r requirements.txt
   ```
2. Запустить сервер: 
   ```ps
   cd food_detection
   py manage.py runserver
   ```
3. В отдельном терминале запустить скрипт для проверки работы сервера. Это синглтон, поэтому первый прогон будет долгим, ибо нужно инициализировать модель, но дальше будет существенно быстрее (возможно, было бы лучше импортировать глобально созданный объект в модуле):
   ```ps
   py ./image_sender.py
   ```
## Что следует знать
1. Сейчас сервер крутиться на локалхосте: `http://127.0.0.1:8000/`
2. Обработчик изображений привязан к адресу `http://127.0.0.1:8000/detector/`
3. В файле `food_detection/detector/views.py` хранится обработчик изображений `img_handler`. Если требуется изменить формат его выхода -- смело меняйте (сейчас он возвращает json с полем `detections`, в котором хранится список найденных на картинке продуктов)
4. На данный момент, модель работает оч плохо (по факту из 5 тестовых картинок, адекватно распознался только банан). Это из-за того, что датасет гигантский (32к изображений, из который я юзаю всего 7к, ибо в колаб больше не помещается + 498 классов!) и тренировки проходят долго. а данный момент лучшая точность -- 25%. Постараюсь всё же добить хотя б до 70%